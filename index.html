<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BBC TZ</title>
    <!-- <style>
      .hidden {
        display: none;
      }
    </style> -->
  </head>
  <body>
    <div id="root"></div>
    <!-- <div
      id="chat"
      class="max-w-[300px] fixed right-2 bottom-2 p-4 bg-white border-gray-30"
    >
      <div id="chat_icon">
        <button id="chat_open" class="w-[150px] flex items-center">O</button>
      </div>
      <div id="chat_welcome" class="hidden">
        <input type="text" id="chat_name" name="name" placeholder="chat name" />
        <button id="chat_join">JOin</button>
      </div>
      <div id="chat_room" class="hidden">
        <div id="chat_log">
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam,
            dicta.
          </p>
        </div>
        <input type="text" id="chat_message_input" name="body" />
        <button id="chat_message_submit">Submit</button>
      </div>
    </div>
    <script type="text/javascript">
      let chatName = "";
      let chatSocket = null;
      let chatWindowUrl = "http://bbc.mebel-zakaz.uz/chat/messages/";
      let chatRoomUuid = Math.random().toString(36).slice(2, 12);

      const chatElement = document.querySelector("#chat");
      const chatOpenElement = document.querySelector("#chat_open");
      const chatJoinElement = document.querySelector("#chat_join");
      const chatIconElement = document.querySelector("#chat_icon");
      const chatWelcomeElement = document.querySelector("#chat_welcome");
      const chatRoomElement = document.querySelector("#chat_room");
      const chatNameElement = document.querySelector("#chat_name");
      const chatLogElement = document.querySelector("#chat_log");
      const chatInputElement = document.querySelector("#chat_message_input");
      const chatSubmitElement = document.querySelector("#chat_message_submit");

      const joinChatRoom = () => {
        console.log("join");
        chatName = chatNameElement.value;
        console.log("join as", chatName);
        console.log("join uuid", chatRoomUuid);

        let data = new FormData();
        data.append("name", chatName);
        data.append("url", chatWindowUrl);
        fetch(`http://bbc.mebel-zakaz.uz/chat/${chatRoomUuid}/`, {
          method: "POST",
          headers: {
            "X-CSRFToken": localStorage.getItem("token"),
          },
          body: data,
        })
          .then((res) => res.json())
          .then((data) => console.log(data));
      };

      chatOpenElement.addEventListener("click", (e) => {
        e.preventDefault();

        chatIconElement.classList.add("hidden");
        chatWelcomeElement.classList.remove("hidden");

        return false;
      });

      chatJoinElement.addEventListener("click", (e) => {
        e.preventDefault();

        chatWelcomeElement.classList.add("hidden");
        chatRoomElement.classList.remove("hidden");

        joinChatRoom();
        return false;
      });
    </script> -->
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
